{
  "id": "translation-pipeline",
  "name": "Multi-Model Translation Pipeline",
  "description": "Translate text using Hugging Face translation model, evaluate quality with LLM, and conditionally route to approved or needs-revision outputs based on quality score.",
  "nodes": [
    {
      "id": "node-1",
      "type": "input",
      "position": {
        "x": 100,
        "y": 200
      },
      "config": {
        "input_output": {
          "label": "Text to Translate",
          "data_type": "text"
        }
      },
      "label": "Input Text"
    },
    {
      "id": "node-2",
      "type": "huggingface_inference",
      "position": {
        "x": 300,
        "y": 200
      },
      "config": {
        "huggingface_inference": {
          "model_id": "Helsinki-NLP/opus-mt-en-es",
          "task": "translation",
          "parameters": {},
          "input_key": "{{upstream}}",
          "credential_id": null
        }
      },
      "label": "Helsinki-NLP Translation"
    },
    {
      "id": "node-3",
      "type": "agent",
      "position": {
        "x": 500,
        "y": 200
      },
      "config": {
        "agent": {
          "name": "Quality Checker",
          "provider": "openai",
          "model": "gpt-4o",
          "system_prompt": "You are a translation quality evaluator. Evaluate the translation quality on a scale of 0-100 based on accuracy, fluency, and grammar.",
          "temperature": 0.3,
          "max_tokens": null,
          "tools": [],
          "knowledge_bases": [],
          "instructions": [
            "Analyze the translation for accuracy, fluency, and grammar",
            "Assign a quality score from 0-100",
            "Output JSON format: {\"score\": number, \"translation\": string, \"feedback\": string}",
            "Be strict: 80+ is high quality, below 80 needs revision"
          ],
          "show_tool_calls": true,
          "markdown": true
        }
      },
      "label": "Quality Check"
    },
    {
      "id": "node-4",
      "type": "conditional",
      "position": {
        "x": 700,
        "y": 200
      },
      "config": {
        "conditional": {
          "condition_expression": "quality score > 80",
          "true_label": "High Quality",
          "false_label": "Low Quality"
        }
      },
      "label": "Quality Gate"
    },
    {
      "id": "node-5",
      "type": "output",
      "position": {
        "x": 900,
        "y": 150
      },
      "config": {
        "input_output": {
          "label": "Approved Translation",
          "data_type": "text"
        }
      },
      "label": "Approved"
    },
    {
      "id": "node-6",
      "type": "output",
      "position": {
        "x": 900,
        "y": 250
      },
      "config": {
        "input_output": {
          "label": "Needs Revision",
          "data_type": "text"
        }
      },
      "label": "Needs Revision"
    }
  ],
  "edges": [
    {
      "id": "edge-1",
      "source": "node-1",
      "source_handle": null,
      "target": "node-2",
      "target_handle": null,
      "label": null
    },
    {
      "id": "edge-2",
      "source": "node-2",
      "source_handle": null,
      "target": "node-3",
      "target_handle": null,
      "label": null
    },
    {
      "id": "edge-3",
      "source": "node-3",
      "source_handle": null,
      "target": "node-4",
      "target_handle": null,
      "label": null
    },
    {
      "id": "edge-4",
      "source": "node-4",
      "source_handle": "true",
      "target": "node-5",
      "target_handle": null,
      "label": "High Quality"
    },
    {
      "id": "edge-5",
      "source": "node-4",
      "source_handle": "false",
      "target": "node-6",
      "target_handle": null,
      "label": "Low Quality"
    }
  ],
  "metadata": {
    "created_at": "2026-02-09T00:00:00Z",
    "updated_at": "2026-02-09T00:00:00Z",
    "version": "1.0.0",
    "author": "CoconutFlow Team",
    "tags": ["translation", "huggingface", "quality-assurance", "conditional-routing", "multi-model"]
  }
}
